<?php
$locations = [
  // ANIMAL FEED
  ['id' => 1, 'name' => 'Jakarta Utara (Head Office)', 'category' => 'Animal Feed', 'x' => 28, 'y' => 72, 'address' => 'Ancol, Jakarta Utara'],
  ['id' => 2, 'name' => 'Cirebon', 'category' => 'Animal Feed', 'x' => 33, 'y' => 74, 'address' => 'Pantura Cirebon'],
  ['id' => 3, 'name' => 'Purwakarta', 'category' => 'Animal Feed', 'x' => 30, 'y' => 73.5],
  ['id' => 4, 'name' => 'Semarang', 'category' => 'Animal Feed', 'x' => 35, 'y' => 75],
  ['id' => 5, 'name' => 'Sidoarjo', 'category' => 'Animal Feed', 'x' => 41, 'y' => 77],
  ['id' => 6, 'name' => 'Mojokerto', 'category' => 'Animal Feed', 'x' => 42, 'y' => 77.5],
  ['id' => 7, 'name' => 'Medan', 'category' => 'Animal Feed', 'x' => 12, 'y' => 35],
  ['id' => 8, 'name' => 'Lampung Selatan', 'category' => 'Animal Feed', 'x' => 23, 'y' => 68],
  ['id' => 9, 'name' => 'Palembang', 'category' => 'Animal Feed', 'x' => 21, 'y' => 60],
  ['id' => 10, 'name' => 'Makassar', 'category' => 'Animal Feed', 'x' => 62, 'y' => 65],
  ['id' => 11, 'name' => 'Banjarbaru', 'category' => 'Animal Feed', 'x' => 52, 'y' => 64],
  
  // DOC & BREEDING
  ['id' => 20, 'name' => 'Bogor', 'category' => 'DOC & Breeding', 'x' => 27, 'y' => 74],
  ['id' => 21, 'name' => 'Sukabumi', 'category' => 'DOC & Breeding', 'x' => 26, 'y' => 75],
  ['id' => 22, 'name' => 'Cianjur', 'category' => 'DOC & Breeding', 'x' => 27.5, 'y' => 74.5],
  ['id' => 23, 'name' => 'Subang', 'category' => 'DOC & Breeding', 'x' => 30, 'y' => 73],
  ['id' => 24, 'name' => 'Klaten', 'category' => 'DOC & Breeding', 'x' => 36, 'y' => 76.5],
  ['id' => 25, 'name' => 'Boyolali', 'category' => 'DOC & Breeding', 'x' => 35.5, 'y' => 76],
  ['id' => 26, 'name' => 'Kediri', 'category' => 'DOC & Breeding', 'x' => 40, 'y' => 77.5],
  ['id' => 27, 'name' => 'Blitar', 'category' => 'DOC & Breeding', 'x' => 40.5, 'y' => 78],
  ['id' => 28, 'name' => 'Lampung Tengah', 'category' => 'DOC & Breeding', 'x' => 24, 'y' => 67],
  ['id' => 29, 'name' => 'Maros', 'category' => 'DOC & Breeding', 'x' => 61, 'y' => 64],

  // POULTRY FARMING
  ['id' => 40, 'name' => 'Jawa Barat (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 29, 'y' => 74],
  ['id' => 41, 'name' => 'Jawa Tengah (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 35, 'y' => 75.5],
  ['id' => 42, 'name' => 'Jawa Timur (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 41, 'y' => 77],
  ['id' => 43, 'name' => 'Lampung (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 23, 'y' => 67],
  ['id' => 44, 'name' => 'Sumatera Selatan (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 21, 'y' => 60],
  ['id' => 45, 'name' => 'Sulawesi Selatan (Kemitraan)', 'category' => 'Poultry Farming', 'x' => 62, 'y' => 65],

  // FOOD PROCESSING
  ['id' => 60, 'name' => 'Cakung – Jakarta Timur', 'category' => 'Food Processing', 'x' => 29.5, 'y' => 72.5],
  ['id' => 61, 'name' => 'Cikande – Banten', 'category' => 'Food Processing', 'x' => 26, 'y' => 72],
  ['id' => 62, 'name' => 'Bekasi', 'category' => 'Food Processing', 'x' => 29.8, 'y' => 73],
  ['id' => 63, 'name' => 'Salatiga', 'category' => 'Food Processing', 'x' => 36, 'y' => 76],
  ['id' => 64, 'name' => 'Sidoarjo', 'category' => 'Food Processing', 'x' => 41, 'y' => 77],
  ['id' => 65, 'name' => 'Medan', 'category' => 'Food Processing', 'x' => 12, 'y' => 35],

  // CONSUMER FOOD
  ['id' => 80, 'name' => 'Jakarta (DC)', 'category' => 'Consumer Food', 'x' => 29, 'y' => 72],
  ['id' => 81, 'name' => 'Bandung (DC)', 'category' => 'Consumer Food', 'x' => 28, 'y' => 74.5],
  ['id' => 82, 'name' => 'Semarang (DC)', 'category' => 'Consumer Food', 'x' => 35, 'y' => 75],
  ['id' => 83, 'name' => 'Surabaya (DC)', 'category' => 'Consumer Food', 'x' => 42, 'y' => 77.5],
  ['id' => 84, 'name' => 'Medan (DC)', 'category' => 'Consumer Food', 'x' => 12, 'y' => 35],
  ['id' => 85, 'name' => 'Makassar (DC)', 'category' => 'Consumer Food', 'x' => 63, 'y' => 65],

  // AQUA FEED
  ['id' => 100, 'name' => 'Lampung Selatan', 'category' => 'Aqua Feed', 'x' => 22.5, 'y' => 69],
  ['id' => 101, 'name' => 'Banyuwangi', 'category' => 'Aqua Feed', 'x' => 46, 'y' => 80],
  ['id' => 102, 'name' => 'Makassar', 'category' => 'Aqua Feed', 'x' => 64, 'y' => 66],
  ['id' => 103, 'name' => 'Medan', 'category' => 'Aqua Feed', 'x' => 12, 'y' => 35],
];

$categories = [
    ['label' => 'All', 'icon' => 'map'],
    ['label' => 'Animal Feed', 'icon' => 'factory'],
    ['label' => 'DOC & Breeding', 'icon' => 'egg'],
    ['label' => 'Poultry Farming', 'icon' => 'warehouse'],
    ['label' => 'Food Processing', 'icon' => 'truck'],
    ['label' => 'Consumer Food', 'icon' => 'building-2'],
    ['label' => 'Aqua Feed', 'icon' => 'fish'],
];
?>

<section 
    x-data="{ 
        activeCategory: 'All', 
        hoveredLoc: null,
        locations: <?php echo e(json_encode($locations)); ?>,
        get filtered() {
            return this.activeCategory === 'All' 
                ? this.locations 
                : this.locations.filter(l => l.category === this.activeCategory);
        }
    }"
    class="relative h-[90vh] w-full overflow-hidden bg-[#020617] text-white"
>
    <!-- 1. BACKGROUND MAP (Parallax Logic simulated with CSS pulse or just static for now as animate-prop replacement is complex) -->
    <div class="absolute inset-0 z-0 flex items-center justify-center p-10 opacity-30 grayscale brightness-150 animate-pulse-slow">
        <img src="<?php echo e(asset('images/indonesia-map.svg')); ?>" alt="Indonesia Map" class="w-full h-full object-contain" />
    </div>

    <!-- 2. GRADIENT OVERLAY -->
    <div class="absolute inset-0 bg-gradient-to-t from-[#020617] via-transparent to-[#020617]/80 z-10 pointer-events-none"></div>

    <!-- 3. HEADER & FILTER -->
    <div class="absolute top-12 left-0 right-0 z-30 text-center px-6">
        <div class="inline-block px-4 py-1 rounded-full border border-[#FFD700]/30 bg-[#FFD700]/10 mb-4 animate-fade-down">
            <p class="text-[#FFD700] text-[10px] font-bold tracking-[0.4em] uppercase">Ecosystem Network</p>
        </div>
        
        <h2 className="text-3xl md:text-5xl font-black mb-8 tracking-tight animate-fade-down animation-delay-200">
            Jejak Operasional <span class="text-[#0AA1FF]">CP Indonesia</span>
        </h2>

        <!-- Tab Filter -->
        <div class="flex flex-wrap justify-center gap-2 md:gap-3 max-w-5xl mx-auto animate-fade-up animation-delay-400">
            <?php $__currentLoopData = $categories; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $c): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>
                <button
                    @click="activeCategory = '<?php echo e($c['label']); ?>'"
                    :class="activeCategory === '<?php echo e($c['label']); ?>' 
                        ? 'bg-[#FFD700] border-[#FFD700] text-black shadow-[0_0_20px_rgba(255,215,0,0.4)]' 
                        : 'bg-white/5 border-white/10 text-gray-400 hover:bg-white/10'"
                    class="px-4 py-2 md:px-5 md:py-2.5 rounded-xl text-[10px] md:text-xs font-bold uppercase tracking-widest flex items-center gap-2 transition-all border"
                >
                    <!-- Icon Switch -->
                    <?php if($c['icon'] == 'map'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21 3 6"/><line x1="9" x2="9" y1="3" y2="18"/><line x1="15" x2="15" y1="6" y2="21"/></svg>
                    <?php elseif($c['icon'] == 'factory'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M17 18h1"/><path d="M12 18h1"/><path d="M7 18h1"/></svg>
                    <?php elseif($c['icon'] == 'egg'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg> <!-- Placeholder for egg -->
                    <?php elseif($c['icon'] == 'warehouse'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z"/><path d="M6 18h12"/><path d="M6 14h12"/></svg>
                    <?php elseif($c['icon'] == 'truck'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="13" x="1" y="6" rx="2"/><polygon points="17 6 23 9 23 13 17 13 17 6"/><circle cx="5" cy="19" r="2"/><circle cx="12" cy="19" r="2"/><circle cx="19" cy="19" r="2"/></svg>
                    <?php elseif($c['icon'] == 'building-2'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>
                    <?php elseif($c['icon'] == 'fish'): ?> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"/><path d="M2.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"/></svg> <!-- Placeholder for fish -->
                    <?php endif; ?>
                    
                    <?php echo e($c['label']); ?>

                </button>
            <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>
        </div>
    </div>

    <!-- 4. MARKERS LAYER -->
    <div class="absolute inset-0 z-20">
        <template x-for="p in filtered" :key="p.id">
            <div
                class="absolute pointer-events-auto cursor-pointer"
                :style="`left: ${p.x}%; top: ${p.y}%;`"
                @mouseenter="hoveredLoc = p"
                @mouseleave="hoveredLoc = null"
            >
                <div class="relative group -translate-x-1/2 -translate-y-1/2 transform">
                    <!-- Ping Radar -->
                    <span class="absolute inset-0 rounded-full bg-[#FFD700] animate-ping opacity-20"></span>
                    
                    <!-- Core Dot -->
                    <div 
                        class="w-3 h-3 md:w-4 md:h-4 rounded-full border-2 border-white shadow-xl z-10 relative transition-colors duration-300"
                        :class="p.category === 'Animal Feed' ? 'bg-[#001EF2]' : 'bg-[#FFD700]'"
                    ></div>

                    <!-- Info Tooltip -->
                    <div
                        x-show="hoveredLoc && hoveredLoc.id === p.id"
                        x-transition:enter="transition ease-out duration-200"
                        x-transition:enter-start="opacity-0 scale-90 translate-y-4"
                        x-transition:enter-end="opacity-100 scale-100 translate-y-0"
                        x-transition:leave="transition ease-in duration-150"
                        x-transition:leave-start="opacity-100 scale-100 translate-y-0"
                        x-transition:leave-end="opacity-0 scale-90 translate-y-4"
                        class="absolute bottom-8 left-1/2 -translate-x-1/2 bg-white text-slate-900 p-3 rounded-xl shadow-2xl min-w-[180px] z-50 border-b-4 border-[#FFD700]"
                        style="display: none;"
                    >
                        <p class="text-[9px] font-black uppercase tracking-tighter text-blue-600 mb-1" x-text="p.category"></p>
                        <p class="text-xs font-black leading-tight" x-text="p.name"></p>
                        <template x-if="p.address">
                            <p class="text-[9px] text-slate-400 mt-1 italic" x-text="p.address"></p>
                        </template>
                    </div>
                </div>
            </div>
        </template>
    </div>

    <!-- 5. SCANLINE EFFECT -->
    <div class="absolute left-0 right-0 h-[1px] bg-[#0AA1FF]/20 z-10 pointer-events-none shadow-[0_0_15px_#0AA1FF] animate-scanline"></div>
</section>

<style>
    @keyframes pulseSlow {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.02); }
    }
    .animate-pulse-slow {
        animation: pulseSlow 15s linear infinite;
    }

    @keyframes scanline {
        0% { top: -10%; }
        100% { top: 110%; }
    }
    .animate-scanline {
        animation: scanline 10s linear infinite;
    }
    
    @keyframes fadeDown {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-down {
        animation: fadeDown 0.8s ease-out forwards;
        opacity: 0;
    }
</style>
<?php /**PATH C:\laragon\www\OneMoreLightLP\resources\views/public/sections/operational-area.blade.php ENDPATH**/ ?>